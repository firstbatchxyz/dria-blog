# Exporting Data

### To Different Formats
```python
# Export to pandas DataFrame
df = dataset.to_pandas()

# Export to JSONL
dataset.to_jsonl("output.jsonl")

# Export to JSON
dataset.to_json("output.json")
```

### Format for Training

DriaDataset enables [TRL](https://huggingface.co/docs/trl/index) ready data exports for multiple training setups.

The `Formatter` class is used to convert a dataset into a format that can be used by a specific trainer. 
Data generated by Dria Network can be transformed into training-ready data using `Formatter`

#### Format Types

The `Formatter` class supports the following format types:

- Standard
- Conversational

and following subtypes for each format type:

1. LANGUAGE_MODELING
2. PROMPT_ONLY
3. PROMPT_COMPLETION
4. PREFERENCE
5. UNPAIRED_PREFERENCE

#### HuggingFace TRL Expected Dataset Formats

HuggingFace's TRL is a framework to train transformer language models with Reinforcement Learning, from the Supervised Fine-tuning step (SFT), Reward Modeling step (RM) to the Proximal Policy Optimization (PPO) step.

Dria allows you to convert the generated data into the expected dataset [format](https://huggingface.co/docs/trl/dataset_formats) for each trainer in the TRL framework. 
Enabling seamless plug-n-play with HuggingFace's TRL.

---


| Trainer               | Expected Dataset Type                                       |
|-----------------------|------------------------------------------------------------|
| **BCOTrainer**        | `FormatType.STANDARD_UNPAIRED_PREFERENCE`                  |
| **CPOTrainer**        | `FormatType.STANDARD_PREFERENCE` |
| **DPOTrainer**        | `FormatType.STANDARD_PREFERENCE`|
| **GKDTrainer**        | `FormatType.STANDARD_PROMPT_COMPLETION`                    |
| **IterativeSFTTrainer** | `FormatType.STANDARD_UNPAIRED_PREFERENCE`                |
| **KTOTrainer**        | `FormatType.STANDARD_UNPAIRED_PREFERENCE` or `FormatType.STANDARD_PREFERENCE` |
| **NashMDTrainer**     | `FormatType.STANDARD_PROMPT_ONLY`                          |
| **OnlineDPOTrainer**  | `FormatType.STANDARD_PROMPT_ONLY`                          |
| **ORPOTrainer**       | `FormatType.STANDARD_PREFERENCE`|
| **PPOTrainer**        | `FormatType.STANDARD_LANGUAGE_MODELING`|
| **RewardTrainer**     | `FormatType.STANDARD_PREFERENCE`|
| **SFTTrainer**        | `FormatType.STANDARD_LANGUAGE_MODELING`                    |
| **XPOTrainer**        | `FormatType.STANDARD_PROMPT_ONLY`                          |

## Schema Management

### Update Schema
```python
# Add new fields to schema
dataset.update_schema({"new_field": (str, ...)})
```

## Data Access

```python
# Get all entries
entries = dataset.get_entries()

# Get entries without metadata
data_only = dataset.get_entries(data_only=True)
```

## Key Features

1. **Schema Validation**: Ensures data consistency using Pydantic models
2. **Flexible Import/Export**: Supports multiple data formats
3. **Database Integration**: Persistent storage with DatasetDB
4. **Schema Evolution**: Ability to update schema and mutate data
5. **Training Format**: Specialized formatting for ML training
6. **Data Validation**: Automatic validation of entries against schema

## Notes

- Always initialize with a proper schema for data validation
- Use appropriate data types in schema definition
- Consider memory limitations when working with large datasets
- Ensure proper database configuration for persistence